{"version":3,"sources":["../src/plugins/sortable.js"],"names":[],"mappings":"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","file":"angular-gantt-sortable-plugin.js","sourcesContent":["(function(){\n    'use strict';\n\n    var moduleName = 'gantt.sortable';\n    var directiveName = 'ganttSortable';\n    var pluginDependencies = [\n        'gantt',\n        {module:'ang-drag-drop', url:'https://github.com/ganarajpr/angular-dragdrop.git#master'}\n    ];\n\n    var failedDependencies = [];\n    var loadedDependencies = [];\n    var failedDependency;\n\n    for (var i = 0, l = pluginDependencies.length; i < l; i++) {\n        var currentDependency = pluginDependencies[i];\n        try {\n            if (angular.isString(currentDependency)) {\n                currentDependency = {module: currentDependency};\n                pluginDependencies[i] = currentDependency;\n            }\n            angular.module(currentDependency.module);\n            loadedDependencies.push(currentDependency.module);\n        } catch (e) {\n            currentDependency.exception = e;\n            failedDependencies.push(currentDependency);\n        }\n    }\n\n    if (failedDependencies.length > 0) {\n        angular.module(moduleName, []).directive(directiveName, ['$log', function($log) {\n            return {\n                restrict: 'E',\n                require: '^gantt',\n                scope: {\n                    enabled: '=?'\n                },\n                link: function() {\n                    $log.warn(moduleName + ' module can\\'t require some dependencies:');\n                    for (var i= 0,l =failedDependencies.length; i<l; i++) {\n                        failedDependency = failedDependencies[i];\n\n                        var errorMessage = failedDependency.module;\n                        if (failedDependency.url) {\n                            errorMessage += ' (' + failedDependency.url + ')';\n                        }\n                        if (failedDependency.exception && failedDependency.exception.message) {\n                            errorMessage += ': ' + failedDependency.exception.message;\n                        }\n\n                        $log.warn(errorMessage);\n                    }\n                    $log.warn(directiveName + ' plugin directive won\\'t be available');\n                }\n            };\n        }]);\n    } else {\n        angular.module(moduleName, loadedDependencies).directive(directiveName, ['ganttUtils', '$compile', function(utils, $compile) {\n            // Provides the row sort functionality to any Gantt row\n            // Uses the sortableState to share the current row\n\n            return {\n                restrict: 'E',\n                require: '^gantt',\n                scope: {\n                    enabled: '=?'\n                },\n                link: function(scope, element, attrs, ganttCtrl) {\n                    var api = ganttCtrl.gantt.api;\n\n                    // Load options from global options attribute.\n                    if (scope.options && typeof(scope.options.sortable) === 'object') {\n                        for (var option in scope.options.sortable) {\n                            scope[option] = scope.options[option];\n                        }\n                    }\n\n                    if (scope.enabled === undefined) {\n                        scope.enabled = true;\n                    }\n\n                    api.directives.on.new(scope, function(directiveName, rowScope, rowElement) {\n                        if (directiveName === 'ganttRowLabel') {\n                            rowScope.checkDraggable = function() {\n                                var rowSortable = rowScope.row.model.sortable;\n\n                                if (typeof(rowSortable) === 'boolean') {\n                                    rowSortable = {enabled: rowSortable};\n                                }\n\n                                return utils.firstProperty([rowSortable], 'enabled', scope.enabled);\n                            };\n\n                            rowScope.onDropSuccess = function() {\n                                rowScope.$evalAsync();\n                            };\n\n                            rowScope.onDrop = function(evt, data) {\n                                var row = rowScope.row.rowsManager.rowsMap[data.id];\n                                if (row !== rowScope) {\n                                    rowScope.row.rowsManager.moveRow(row, rowScope.row);\n                                    rowScope.$evalAsync();\n                                }\n                            };\n\n                            rowElement.attr('ui-draggable', '{{checkDraggable()}}');\n                            rowElement.attr('drag-channel', '\\'sortable\\'');\n                            rowElement.attr('ui-on-drop', 'onDrop($event, $data)');\n                            rowElement.attr('on-drop-success', 'onDropSuccess()');\n\n                            rowElement.attr('drop-channel', '\\'sortable\\'');\n                            rowElement.attr('drag', 'row.model');\n\n                            $compile(rowElement)(rowScope);\n                        }\n                    });\n\n                }\n            };\n        }]);\n    }\n\n}());\n\n"]}